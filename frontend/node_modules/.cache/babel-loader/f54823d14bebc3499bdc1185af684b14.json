{"ast":null,"code":"'use strict';\n/*!\n * Module dependencies.\n */\n\nconst MongooseError = require('./mongooseError');\n\nconst get = require('../helpers/get');\n\nconst util = require('util');\n/**\n * Casting Error constructor.\n *\n * @param {String} type\n * @param {String} value\n * @inherits MongooseError\n * @api private\n */\n\n\nclass CastError extends MongooseError {\n  constructor(type, value, path, reason, schemaType) {\n    // If no args, assume we'll `init()` later.\n    if (arguments.length > 0) {\n      const stringValue = getStringValue(value);\n      const messageFormat = getMessageFormat(schemaType);\n      const msg = formatMessage(null, type, stringValue, path, messageFormat);\n      super(msg);\n      this.init(type, value, path, reason, schemaType);\n    } else {\n      super(formatMessage());\n    }\n  }\n  /*!\n   * ignore\n   */\n\n\n  init(type, value, path, reason, schemaType) {\n    this.stringValue = getStringValue(value);\n    this.messageFormat = getMessageFormat(schemaType);\n    this.kind = type;\n    this.value = value;\n    this.path = path;\n    this.reason = reason;\n  }\n  /*!\n   * ignore\n   * @param {Readonly<CastError>} other\n   */\n\n\n  copy(other) {\n    this.messageFormat = other.messageFormat;\n    this.stringValue = other.stringValue;\n    this.kind = other.kind;\n    this.value = other.value;\n    this.path = other.path;\n    this.reason = other.reason;\n    this.message = other.message;\n  }\n  /*!\n   * ignore\n   */\n\n\n  setModel(model) {\n    this.model = model;\n    this.message = formatMessage(model, this.kind, this.stringValue, this.path, this.messageFormat);\n  }\n\n}\n\nObject.defineProperty(CastError.prototype, 'name', {\n  value: 'CastError'\n});\n\nfunction getStringValue(value) {\n  let stringValue = util.inspect(value);\n  stringValue = stringValue.replace(/^'|'$/g, '\"');\n\n  if (!stringValue.startsWith('\"')) {\n    stringValue = '\"' + stringValue + '\"';\n  }\n\n  return stringValue;\n}\n\nfunction getMessageFormat(schemaType) {\n  const messageFormat = get(schemaType, 'options.cast', null);\n\n  if (typeof messageFormat === 'string') {\n    return messageFormat;\n  }\n}\n/*!\n * ignore\n */\n\n\nfunction formatMessage(model, kind, stringValue, path, messageFormat) {\n  if (messageFormat != null) {\n    let ret = messageFormat.replace('{KIND}', kind).replace('{VALUE}', stringValue).replace('{PATH}', path);\n\n    if (model != null) {\n      ret = ret.replace('{MODEL}', model.modelName);\n    }\n\n    return ret;\n  } else {\n    let ret = 'Cast to ' + kind + ' failed for value ' + stringValue + ' at path \"' + path + '\"';\n\n    if (model != null) {\n      ret += ' for model \"' + model.modelName + '\"';\n    }\n\n    return ret;\n  }\n}\n/*!\n * exports\n */\n\n\nmodule.exports = CastError;","map":{"version":3,"sources":["C:/Users/Thakshan/Desktop/BookCorner/node_modules/mongoose/lib/error/cast.js"],"names":["MongooseError","require","get","util","CastError","constructor","type","value","path","reason","schemaType","arguments","length","stringValue","getStringValue","messageFormat","getMessageFormat","msg","formatMessage","init","kind","copy","other","message","setModel","model","Object","defineProperty","prototype","inspect","replace","startsWith","ret","modelName","module","exports"],"mappings":"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","sourcesContent":["'use strict';\n\n/*!\n * Module dependencies.\n */\n\nconst MongooseError = require('./mongooseError');\nconst get = require('../helpers/get');\nconst util = require('util');\n\n/**\n * Casting Error constructor.\n *\n * @param {String} type\n * @param {String} value\n * @inherits MongooseError\n * @api private\n */\n\nclass CastError extends MongooseError {\n  constructor(type, value, path, reason, schemaType) {\n    // If no args, assume we'll `init()` later.\n    if (arguments.length > 0) {\n      const stringValue = getStringValue(value);\n      const messageFormat = getMessageFormat(schemaType);\n      const msg = formatMessage(null, type, stringValue, path, messageFormat);\n      super(msg);\n      this.init(type, value, path, reason, schemaType);\n    } else {\n      super(formatMessage());\n    }\n  }\n\n  /*!\n   * ignore\n   */\n  init(type, value, path, reason, schemaType) {\n    this.stringValue = getStringValue(value);\n    this.messageFormat = getMessageFormat(schemaType);\n    this.kind = type;\n    this.value = value;\n    this.path = path;\n    this.reason = reason;\n  }\n\n  /*!\n   * ignore\n   * @param {Readonly<CastError>} other\n   */\n  copy(other) {\n    this.messageFormat = other.messageFormat;\n    this.stringValue = other.stringValue;\n    this.kind = other.kind;\n    this.value = other.value;\n    this.path = other.path;\n    this.reason = other.reason;\n    this.message = other.message;\n  }\n\n  /*!\n   * ignore\n   */\n  setModel(model) {\n    this.model = model;\n    this.message = formatMessage(model, this.kind, this.stringValue, this.path,\n      this.messageFormat);\n  }\n}\n\nObject.defineProperty(CastError.prototype, 'name', {\n  value: 'CastError'\n});\n\nfunction getStringValue(value) {\n  let stringValue = util.inspect(value);\n  stringValue = stringValue.replace(/^'|'$/g, '\"');\n  if (!stringValue.startsWith('\"')) {\n    stringValue = '\"' + stringValue + '\"';\n  }\n  return stringValue;\n}\n\nfunction getMessageFormat(schemaType) {\n  const messageFormat = get(schemaType, 'options.cast', null);\n  if (typeof messageFormat === 'string') {\n    return messageFormat;\n  }\n}\n\n/*!\n * ignore\n */\n\nfunction formatMessage(model, kind, stringValue, path, messageFormat) {\n  if (messageFormat != null) {\n    let ret = messageFormat.\n      replace('{KIND}', kind).\n      replace('{VALUE}', stringValue).\n      replace('{PATH}', path);\n    if (model != null) {\n      ret = ret.replace('{MODEL}', model.modelName);\n    }\n\n    return ret;\n  } else {\n    let ret = 'Cast to ' + kind + ' failed for value ' +\n      stringValue + ' at path \"' + path + '\"';\n    if (model != null) {\n      ret += ' for model \"' + model.modelName + '\"';\n    }\n\n    return ret;\n  }\n}\n\n/*!\n * exports\n */\n\nmodule.exports = CastError;\n"]},"metadata":{},"sourceType":"script"}