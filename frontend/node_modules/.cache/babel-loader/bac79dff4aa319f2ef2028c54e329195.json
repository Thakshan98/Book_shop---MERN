{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Thakshan\\\\Desktop\\\\BookCorner\\\\frontend\\\\src\\\\screens\\\\ProfileScreen.js\";\nimport React, { useState, useEffect, useRef } from 'react';\nimport { Table, Form, Button, Row, Col, Container } from 'react-bootstrap';\nimport { LinkContainer } from 'react-router-bootstrap';\nimport { useDispatch, useSelector } from 'react-redux';\nimport Message from '../components/Message';\nimport Loader from '../components/Loader';\nimport { getUserDetails, updateUserProfile } from '../actions/userActions';\nimport { deleteOrder, listMyOrders, showOrder } from '../actions/orderActions';\nimport { USER_UPDATE_PROFILE_RESET } from '../constants/userConstants';\nimport { ORDER_SHOW_RESET } from '../constants/orderConstants';\nimport { confirm } from \"react-confirm-box\";\n\nconst ProfileScreen = ({\n  location,\n  history\n}) => {\n  const [name, setName] = useState('');\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [confirmPassword, setConfirmPassword] = useState('');\n  const [currentPassword, setCurrentPassword] = useState('');\n  const [message, setMessage] = useState(null);\n  const [num, setNum] = useState(0);\n  const dispatch = useDispatch();\n  const userDetails = useSelector(state => state.userDetails);\n  const {\n    loading,\n    error,\n    user\n  } = userDetails;\n  const userLogin = useSelector(state => state.userLogin);\n  const {\n    userInfo\n  } = userLogin;\n  const orderDetails = useSelector(state => state.orderDetails);\n  const {\n    order\n  } = orderDetails;\n  const orderShow = useSelector(state => state.orderShow);\n  const {\n    loading: loadingShow,\n    success: successShow\n  } = orderShow;\n  const userUpdateProfile = useSelector(state => state.userUpdateProfile);\n  const {\n    loading: loadingUpdate,\n    success: success,\n    error: errorUpdate\n  } = userUpdateProfile;\n  const orderListMy = useSelector(state => state.orderListMy);\n  const {\n    loading: loadingOrders,\n    error: errorOrders,\n    orders\n  } = orderListMy;\n  const orderDelete = useSelector(state => state.orderDelete);\n  const {\n    loading: loadingDelete,\n    error: errorDelete,\n    success: successDelete\n  } = orderDelete;\n  useEffect(() => {\n    let i = setNum(num + 1);\n\n    if (!userInfo) {\n      history.push('/login');\n    } else {\n      if (!user || !user.name || success) {\n        dispatch({\n          type: USER_UPDATE_PROFILE_RESET\n        });\n        dispatch(getUserDetails('profile'));\n        dispatch(listMyOrders());\n      }\n    }\n  }, [dispatch, history, userInfo, user, success, successDelete, orderListMy, successShow]);\n\n  const submitHandler = e => {\n    e.preventDefault();\n\n    if (password !== confirmPassword) {\n      setMessage('Passwords do not match');\n    } else {\n      dispatch(updateUserProfile({\n        id: user._id,\n        name,\n        email,\n        password,\n        currentPassword\n      }));\n      setMessage('');\n    }\n  };\n\n  const options = {\n    labels: {\n      confirmable: \"Confirm\",\n      cancellable: \"Cancel\"\n    }\n  };\n\n  const deleteHandler = async id => {\n    const result = await confirm(\"Are you sure?\", options);\n\n    if (result) {\n      dispatch(deleteOrder(id));\n      return;\n    }\n\n    console.log(\"You click No!\");\n  }; //const [orderDelete,setOrderDelete] = useState(true)\n\n\n  return /*#__PURE__*/React.createElement(Container, {\n    className: \"mt-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    md: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 9\n    }\n  }, \"User Profile\"), message && /*#__PURE__*/React.createElement(Message, {\n    variant: \"danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 21\n    }\n  }, message), errorUpdate && /*#__PURE__*/React.createElement(Message, {\n    variant: \"danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 25\n    }\n  }, errorUpdate), success && /*#__PURE__*/React.createElement(Message, {\n    variant: \"success\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 21\n    }\n  }, \"Profile Updated\"), loading ? /*#__PURE__*/React.createElement(Loader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 11\n    }\n  }) : error ? /*#__PURE__*/React.createElement(Message, {\n    variant: \"danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 11\n    }\n  }, error) : /*#__PURE__*/React.createElement(Form, {\n    onSubmit: submitHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Form.Group, {\n    controlId: \"name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 15\n    }\n  }, \"Name\"), /*#__PURE__*/React.createElement(Form.Control, {\n    type: \"name\",\n    placeholder: \"Enter name\",\n    value: name,\n    onChange: e => setName(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(Form.Group, {\n    controlId: \"email\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 15\n    }\n  }, \"Email Address\"), /*#__PURE__*/React.createElement(Form.Control, {\n    type: \"email\",\n    placeholder: \"Enter email\",\n    value: email,\n    onChange: e => setEmail(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(Form.Group, {\n    controlId: \"password\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 15\n    }\n  }, \"Password\"), /*#__PURE__*/React.createElement(Form.Control, {\n    type: \"password\",\n    placeholder: \"Enter password\",\n    value: password,\n    onChange: e => setPassword(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(Form.Group, {\n    controlId: \"confirmPassword\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 15\n    }\n  }, \"Confirm Password\"), /*#__PURE__*/React.createElement(Form.Control, {\n    type: \"password\",\n    placeholder: \"Confirm password\",\n    value: confirmPassword,\n    onChange: e => setConfirmPassword(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(Form.Group, {\n    controlId: \"currentPassword\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 15\n    }\n  }, \"Current Password\"), /*#__PURE__*/React.createElement(Form.Control, {\n    type: \"password\",\n    placeholder: \"Enter current password\",\n    value: currentPassword,\n    onChange: e => setCurrentPassword(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(Button, {\n    type: \"submit\",\n    style: {\n      width: '90%',\n      backgroundImage: 'linear-gradient(to bottom right,#50025c, #d20be0,#db3bb6)',\n      color: 'white',\n      fontWeight: '600'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 13\n    }\n  }, \"Update\"))), /*#__PURE__*/React.createElement(Col, {\n    md: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Col, {\n    md: 8,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 7\n    }\n  }, userInfo && !userInfo.isAdmin && /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 9\n    }\n  }, \"My Orders\"), loadingDelete && /*#__PURE__*/React.createElement(Loader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 29\n    }\n  }), errorDelete && /*#__PURE__*/React.createElement(Message, {\n    variant: \"danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 23\n    }\n  }, errorDelete), loadingOrders ? /*#__PURE__*/React.createElement(Loader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 11\n    }\n  }) : errorOrders ? /*#__PURE__*/React.createElement(Message, {\n    variant: \"danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 11\n    }\n  }, errorOrders) : /*#__PURE__*/React.createElement(Table, {\n    striped: true,\n    bordered: true,\n    hover: true,\n    responsive: true,\n    className: \"table-sm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 11\n    }\n  }, userInfo && !userInfo.isAdmin && /*#__PURE__*/React.createElement(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 17\n    }\n  }, \"ORDER NO\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 17\n    }\n  }, \"DATE\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 17\n    }\n  }, \"TOTAL\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 17\n    }\n  }, \"PAID\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 17\n    }\n  }, \"DELIVERED\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 17\n    }\n  }))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 13\n    }\n  }, orders.map((order, i) => /*#__PURE__*/React.createElement(\"tr\", {\n    key: order._id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 19\n    }\n  }, i + 1), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 19\n    }\n  }, order.createdAt.substring(0, 10)), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 19\n    }\n  }, order.totalPrice), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 19\n    }\n  }, order.isPaid ? order.paidAt.substring(0, 10) : /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fas fa-times\",\n    style: {\n      color: 'red'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 23\n    }\n  })), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 19\n    }\n  }, order.isDelivered ? order.deliveredAt.substring(0, 10) : /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fas fa-times\",\n    style: {\n      color: 'red'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 23\n    }\n  })), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(LinkContainer, {\n    to: `/order/${order._id}`,\n    style: {\n      backgroundImage: 'linear-gradient(to bottom right,#0a0366,#475cd1,#8ec7f5)',\n      color: 'white',\n      fontWeight: '600'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    className: \"btn-sm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 23\n    }\n  }, \"Details\"))), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 19\n    }\n  }, order.show ? /*#__PURE__*/React.createElement(Button, {\n    style: {\n      backgroundImage: 'linear-gradient(to bottom right,#c20e0e,#bf301d,#a19c99)',\n      color: 'white',\n      fontWeight: '600'\n    },\n    className: \"btn-sm\",\n    onClick: () => deleteHandler(order._id),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 19\n    }\n  }, \"Cancel order\") : null))))))));\n};\n\nexport default ProfileScreen;","map":{"version":3,"sources":["C:/Users/Thakshan/Desktop/BookCorner/frontend/src/screens/ProfileScreen.js"],"names":["React","useState","useEffect","useRef","Table","Form","Button","Row","Col","Container","LinkContainer","useDispatch","useSelector","Message","Loader","getUserDetails","updateUserProfile","deleteOrder","listMyOrders","showOrder","USER_UPDATE_PROFILE_RESET","ORDER_SHOW_RESET","confirm","ProfileScreen","location","history","name","setName","email","setEmail","password","setPassword","confirmPassword","setConfirmPassword","currentPassword","setCurrentPassword","message","setMessage","num","setNum","dispatch","userDetails","state","loading","error","user","userLogin","userInfo","orderDetails","order","orderShow","loadingShow","success","successShow","userUpdateProfile","loadingUpdate","errorUpdate","orderListMy","loadingOrders","errorOrders","orders","orderDelete","loadingDelete","errorDelete","successDelete","i","push","type","submitHandler","e","preventDefault","id","_id","options","labels","confirmable","cancellable","deleteHandler","result","console","log","target","value","width","backgroundImage","color","fontWeight","isAdmin","map","createdAt","substring","totalPrice","isPaid","paidAt","isDelivered","deliveredAt","show"],"mappings":"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","sourcesContent":["import React, { useState, useEffect,useRef } from 'react'\nimport { Table, Form, Button, Row, Col, Container } from 'react-bootstrap'\nimport { LinkContainer } from 'react-router-bootstrap'\nimport { useDispatch, useSelector } from 'react-redux'\nimport Message from '../components/Message'\nimport Loader from '../components/Loader'\nimport { getUserDetails, updateUserProfile } from '../actions/userActions'\nimport { deleteOrder, listMyOrders,showOrder } from '../actions/orderActions'\nimport { USER_UPDATE_PROFILE_RESET } from '../constants/userConstants'\nimport {  ORDER_SHOW_RESET} from '../constants/orderConstants'\nimport { confirm } from \"react-confirm-box\";\n\n\n\n\nconst ProfileScreen = ({ location, history }) => {\n  const [name, setName] = useState('')\n  const [email, setEmail] = useState('')\n  const [password, setPassword] = useState('')\n  const [confirmPassword, setConfirmPassword] = useState('')\n  const [currentPassword, setCurrentPassword] = useState('')\n  const [message, setMessage] = useState(null)\n  const [num, setNum] = useState(0)\n\n  const dispatch = useDispatch()\n\n  const userDetails = useSelector((state) => state.userDetails)\n  const { loading, error, user } = userDetails\n\n  const userLogin = useSelector((state) => state.userLogin)\n  const { userInfo } = userLogin\n\n  const orderDetails = useSelector((state) => state.orderDetails)\n  const { order} = orderDetails\n\n  const  orderShow = useSelector((state) => state. orderShow)\n  const { loading: loadingShow, success: successShow } =  orderShow\n\n  const userUpdateProfile = useSelector((state) => state.userUpdateProfile)\n  const {loading: loadingUpdate, success: success,  error: errorUpdate } = userUpdateProfile\n\n  const orderListMy = useSelector((state) => state.orderListMy)\n  const { loading: loadingOrders, error: errorOrders, orders } = orderListMy\n\n  const  orderDelete = useSelector((state) => state. orderDelete)\n  const {\n    loading: loadingDelete,\n    error: errorDelete,\n    success: successDelete,\n  } =  orderDelete\n\n  useEffect(() => {\n    let i=setNum(num+1);\n   \n    if (!userInfo) {\n      history.push('/login')\n    } else {\n      if (!user || !user.name || success) {\n        dispatch({ type: USER_UPDATE_PROFILE_RESET })\n        dispatch(getUserDetails('profile'))\n        dispatch(listMyOrders())\n      } \n    }\n  }, [dispatch, history, userInfo, user, success,successDelete, orderListMy,successShow ])\n\n  const submitHandler = (e) => {\n    e.preventDefault()\n\n    \n    if (password !== confirmPassword) {\n      setMessage('Passwords do not match')\n    } else{\n      dispatch(updateUserProfile({ id: user._id, name, email, password,currentPassword }))\n      setMessage('')\n    }\n  }\n\n  const options = {\n    labels: {\n      confirmable: \"Confirm\",\n      cancellable: \"Cancel\"\n    }\n  }\n  const deleteHandler = async(id) => {\n    const result = await confirm(\"Are you sure?\", options);\n    \n    if (result) {\n     \n     dispatch(deleteOrder(id))\n      return;\n    }\n    console.log(\"You click No!\");\n  };\n\n\n  //const [orderDelete,setOrderDelete] = useState(true)\n  \n \n  return (\n    <Container className='mt-5'>\n    <Row>\n      <Col md={3} >\n        <h2>User Profile</h2>\n        {message && <Message variant='danger'>{message}</Message>}\n        {errorUpdate && <Message variant='danger'>{errorUpdate}</Message>}\n        {success && <Message variant='success'>Profile Updated</Message>}\n        {loading ? (\n          <Loader />\n        ) : error ? (\n          <Message variant='danger'>{error}</Message>\n        ) : (\n          <Form onSubmit={submitHandler}>\n            <Form.Group controlId='name'>\n              <Form.Label>Name</Form.Label>\n              <Form.Control\n                type='name'\n                placeholder='Enter name'\n                value={name}\n                onChange={(e) => setName(e.target.value)}\n              ></Form.Control>\n            </Form.Group>\n\n            <Form.Group controlId='email'>\n              <Form.Label>Email Address</Form.Label>\n              <Form.Control\n                type='email'\n                placeholder='Enter email'\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n              ></Form.Control>\n            </Form.Group>\n\n            <Form.Group controlId='password'>\n              <Form.Label>Password</Form.Label>\n              <Form.Control\n                type='password'\n                placeholder='Enter password'\n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n              ></Form.Control>\n            </Form.Group>\n\n            <Form.Group controlId='confirmPassword'>\n              <Form.Label>Confirm Password</Form.Label>\n              <Form.Control\n                type='password'\n                placeholder='Confirm password'\n                value={confirmPassword}\n                onChange={(e) => setConfirmPassword(e.target.value)}\n              ></Form.Control>\n            </Form.Group>\n\n            <Form.Group controlId='currentPassword'>\n              <Form.Label>Current Password</Form.Label>\n              <Form.Control\n                type='password'\n                placeholder='Enter current password'\n                value={currentPassword}\n                onChange={(e) =>setCurrentPassword(e.target.value)}\n              ></Form.Control>\n            </Form.Group>\n\n            <Button type='submit'  style={{ width:'90%',backgroundImage: 'linear-gradient(to bottom right,#50025c, #d20be0,#db3bb6)',color:'white',fontWeight:'600'}}>\n              Update\n            </Button>\n          </Form>\n        )}\n      </Col>\n      <Col md={1}></Col>\n      <Col md={8}>\n      {userInfo && !userInfo.isAdmin && (\n        <h2>My Orders</h2>\n        )}\n          {loadingDelete && <Loader />}\n      {errorDelete && <Message variant='danger'>{errorDelete}</Message>}\n        {loadingOrders ? (\n          <Loader />\n        ) : errorOrders ? (\n          <Message variant='danger'>{errorOrders}</Message>\n        ) : (\n\n        \n          <Table striped bordered hover responsive  className='table-sm'>\n            \n              {userInfo && !userInfo.isAdmin && (\n            <thead>\n              <tr>\n                <th>ORDER NO</th>\n                <th>DATE</th>\n                <th>TOTAL</th>\n                <th>PAID</th>\n                <th>DELIVERED</th>\n                <th></th>\n              </tr>\n            </thead>\n              )}\n            \n            <tbody>\n           \n              {orders.map((order,i) => (\n              \n                \n                <tr key={order._id}>\n                 \n                  <td>{i+1}</td>\n                  <td>{order.createdAt.substring(0, 10)}</td>\n                  <td>{order.totalPrice}</td>\n                  <td>\n                    {order.isPaid ? (\n                      order.paidAt.substring(0, 10)\n                    ) : (\n                      <i className='fas fa-times' style={{ color: 'red' }}></i>\n                    )}\n                  </td>\n                  <td>\n                    {order.isDelivered ? (\n                      order.deliveredAt.substring(0, 10)\n                    ) : (\n                      <i className='fas fa-times' style={{ color: 'red' }}></i>\n                    )}\n                  </td>\n                  <td>\n                    <LinkContainer to={`/order/${order._id}`} style={{ backgroundImage: 'linear-gradient(to bottom right,#0a0366,#475cd1,#8ec7f5)',color:'white',fontWeight:'600'}}>\n                      <Button className='btn-sm'  >\n                        Details\n                      </Button>\n                    </LinkContainer>\n                  </td>\n                  \n                  <td>\n                  \n                  {\n                  order.show?\n                  <Button\n                  style={{ backgroundImage: 'linear-gradient(to bottom right,#c20e0e,#bf301d,#a19c99)',color:'white',fontWeight:'600'}}\n                      className='btn-sm'\n                      onClick={() => deleteHandler(order._id)}\n                     \n                    >\n                      \n                      Cancel order\n                    </Button>:null}\n                   \n                   \n\n                   \n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </Table>\n        )}\n    \n      </Col>\n    </Row>\n    </Container>\n  )\n}\n\nexport default ProfileScreen\n"]},"metadata":{},"sourceType":"module"}