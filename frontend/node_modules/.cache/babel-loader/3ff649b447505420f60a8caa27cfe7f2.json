{"ast":null,"code":"/*!\n * Module requirements\n */\n'use strict';\n\nconst MongooseError = require('./mongooseError');\n\nconst util = require('util');\n\nclass ValidationError extends MongooseError {\n  /**\n   * Document Validation Error\n   *\n   * @api private\n   * @param {Document} [instance]\n   * @inherits MongooseError\n   */\n  constructor(instance) {\n    let _message;\n\n    if (instance && instance.constructor.name === 'model') {\n      _message = instance.constructor.modelName + ' validation failed';\n    } else {\n      _message = 'Validation failed';\n    }\n\n    super(_message);\n    this.errors = {};\n    this._message = _message;\n\n    if (instance) {\n      instance.errors = this.errors;\n    }\n  }\n  /**\n   * Console.log helper\n   */\n\n\n  toString() {\n    return this.name + ': ' + _generateMessage(this);\n  }\n  /*!\n   * inspect helper\n   */\n\n\n  inspect() {\n    return Object.assign(new Error(this.message), this);\n  }\n  /*!\n  * add message\n  */\n\n\n  addError(path, error) {\n    this.errors[path] = error;\n    this.message = this._message + ': ' + _generateMessage(this);\n  }\n\n}\n\nif (util.inspect.custom) {\n  /*!\n  * Avoid Node deprecation warning DEP0079\n  */\n  ValidationError.prototype[util.inspect.custom] = ValidationError.prototype.inspect;\n}\n/*!\n * Helper for JSON.stringify\n */\n\n\nObject.defineProperty(ValidationError.prototype, 'toJSON', {\n  enumerable: false,\n  writable: false,\n  configurable: true,\n  value: function () {\n    return Object.assign({}, this, {\n      message: this.message\n    });\n  }\n});\nObject.defineProperty(ValidationError.prototype, 'name', {\n  value: 'ValidationError'\n});\n/*!\n * ignore\n */\n\nfunction _generateMessage(err) {\n  const keys = Object.keys(err.errors || {});\n  const len = keys.length;\n  const msgs = [];\n  let key;\n\n  for (let i = 0; i < len; ++i) {\n    key = keys[i];\n\n    if (err === err.errors[key]) {\n      continue;\n    }\n\n    msgs.push(key + ': ' + err.errors[key].message);\n  }\n\n  return msgs.join(', ');\n}\n/*!\n * Module exports\n */\n\n\nmodule.exports = ValidationError;","map":{"version":3,"sources":["C:/Users/Thakshan/Desktop/BookCorner/node_modules/mongoose/lib/error/validation.js"],"names":["MongooseError","require","util","ValidationError","constructor","instance","_message","name","modelName","errors","toString","_generateMessage","inspect","Object","assign","Error","message","addError","path","error","custom","prototype","defineProperty","enumerable","writable","configurable","value","err","keys","len","length","msgs","key","i","push","join","module","exports"],"mappings":"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","sourcesContent":["/*!\n * Module requirements\n */\n\n'use strict';\n\nconst MongooseError = require('./mongooseError');\nconst util = require('util');\n\nclass ValidationError extends MongooseError {\n  /**\n   * Document Validation Error\n   *\n   * @api private\n   * @param {Document} [instance]\n   * @inherits MongooseError\n   */\n  constructor(instance) {\n    let _message;\n    if (instance && instance.constructor.name === 'model') {\n      _message = instance.constructor.modelName + ' validation failed';\n    } else {\n      _message = 'Validation failed';\n    }\n\n    super(_message);\n\n    this.errors = {};\n    this._message = _message;\n\n    if (instance) {\n      instance.errors = this.errors;\n    }\n  }\n\n  /**\n   * Console.log helper\n   */\n  toString() {\n    return this.name + ': ' + _generateMessage(this);\n  }\n\n  /*!\n   * inspect helper\n   */\n  inspect() {\n    return Object.assign(new Error(this.message), this);\n  }\n\n  /*!\n  * add message\n  */\n  addError(path, error) {\n    this.errors[path] = error;\n    this.message = this._message + ': ' + _generateMessage(this);\n  }\n}\n\n\nif (util.inspect.custom) {\n  /*!\n  * Avoid Node deprecation warning DEP0079\n  */\n\n  ValidationError.prototype[util.inspect.custom] = ValidationError.prototype.inspect;\n}\n\n/*!\n * Helper for JSON.stringify\n */\nObject.defineProperty(ValidationError.prototype, 'toJSON', {\n  enumerable: false,\n  writable: false,\n  configurable: true,\n  value: function() {\n    return Object.assign({}, this, { message: this.message });\n  }\n});\n\n\nObject.defineProperty(ValidationError.prototype, 'name', {\n  value: 'ValidationError'\n});\n\n/*!\n * ignore\n */\n\nfunction _generateMessage(err) {\n  const keys = Object.keys(err.errors || {});\n  const len = keys.length;\n  const msgs = [];\n  let key;\n\n  for (let i = 0; i < len; ++i) {\n    key = keys[i];\n    if (err === err.errors[key]) {\n      continue;\n    }\n    msgs.push(key + ': ' + err.errors[key].message);\n  }\n\n  return msgs.join(', ');\n}\n\n/*!\n * Module exports\n */\n\nmodule.exports = ValidationError;\n"]},"metadata":{},"sourceType":"script"}